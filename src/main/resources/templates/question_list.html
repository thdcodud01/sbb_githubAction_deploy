<!doctype html>
<html lang="ko" layout:decorate="~{layout}" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body><!--부트스트랩 스타일 링크는 삭제, 왜냐하면 부모 템플릿인 layout.html 템플릿에서 이미 부트스트랩 스타일을 링크하기 때문-->
    <div layout:fragment="content" class="container my-3"> <!--부트스트랩 스타일시트에 정의되어 있는 클래스들-->
        <table class="table"> <!--부트스트랩 스타일시트에 정의되어 있는 클래스들-->
            <thead class="table-dark"> <!--부트스트랩 스타일시트에 정의되어 있는 클래스들-->
                <tr>
                    <th>번호</th>
                    <th>제목</th>
                    <th>작성일시</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="question, loop : ${paging}">
                    <td th:text="${paging.getTotalElements - (paging.number * paging.size) - loop.index}"></td>                    <td>
                        <a th:href="@{|/question/detail/${question.id}|}" th:text="${question.subject}"></a>
                    <span class="text-danger small ms-2"
                          th:if="${#lists.size(question.answerList) > 0}"
                          th:text="${#lists.size(question.answerList)}">
                    </span>
                    </td>
                    <td th:text="${#temporals.format(question.createDate, 'yyyy-MM-dd HH:mm')}"></td> <!--날짜를 보기 좋게 출력하기 위해 타임리프의 #temporals.format(날짜객체, 날짜포맷) 유틸리티를 사용-->
                </tr>
            </tbody>
        </table>
        <!-- 페이징처리 시작 -->
        <div th:if="${!paging.isEmpty()}">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'"> <!--이전 페이지가 없으면 비활성화-->
                    <a class="page-link"
                       th:href="@{|?page=${paging.number-1}|}"> <!--이전 페이지 링크-->
                        <span>이전</span>
                    </a>
                </li>
                <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
                    th:if="${page >= paging.number-5 and page <= paging.number+5}"
                    th:classappend="${page == paging.number} ? 'active'"
                    class="page-item">
                    <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
                </li>
                <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'"> <!--다음 페이지가 없으면 비활성화-->
                    <a class="page-link" th:href="@{|?page=${paging.number+1}|}"> <!--다음 페이지 링크-->
                        <span>다음</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- 페이징처리 끝 -->
        <a th:href="@{/question/create}" class="btn btn-primary">질문 등록하기</a> <!--btn btn-primary 클래스를 적용하면 버튼으로 보임-->
    </div>
</body>
</html>